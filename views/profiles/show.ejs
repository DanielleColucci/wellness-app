<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/profiles/show.css">
<%- include('../partials/nav') %>

<main>
  <div id="header">
    <h1><%= isSelf ? 'Your Profile' : profile.name %></h1>
    <div id="sub-header">
      <img 
      src="<%= profile.avatar %>" alt="<%= profile.name %>'s avatar"
      >
      <div id="quote-div">
        <p>"A recipe has no soul. You, as the cook, must bring soul to the recipe."</p>
        <p>Thomas Keller</p>
      </div>
    </div>
  </div>
  <div id="recipes">
    <h2><%= isSelf ? 'Your Recipes' : `${profile.name}'s Recipes` %> </h2>
    <% if (profile.recipes.length) { %>
      <div id="card-container">
        <% profile.recipes.forEach(recipe => { %>
          <div class="card">
            <div class="card-top">
              <%= recipe.name %>
            </div>
            <div class="card-middle">
              <% if (recipe.owner.equals(user?.profile._id)) { %>
                <a href="/recipes/<%= recipe._id %>/edit">
                  <button type="submit">Edit→</button>
                </a>
                <form action="/recipes/<%= recipe._id %>?_method=DELETE" method="POST">
                  <button type="submit">Delete→</button>
                </form>
              <% } %>
            </div>
            <a href="/recipes/<%= recipe._id %>" class="card-bottom">Details→</a>
          </div>
        <% }) %>
      </div>
    <% } else { %>
      <p id="no-recipe-msg">You haven't created any recipes yet. Use the button above to make one!</p>
    <% } %> 
  </div>
</main>

<%- include('../partials/footer') %>